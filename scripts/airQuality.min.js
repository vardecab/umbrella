const airly_api_key="p1ukBMrlBEPfRD1SynGXU9iEcr0zzJrE",aqicn_api_key="b2a31fc801f6e4e27353e44d13acf144189c4a0a";function airMask(e,i){setTimeout((function(){fetch("https://airapi.airly.eu/v2/measurements/point?indexType=AIRLY_CAQI&lat="+e+"&lng="+i+"&apikey="+airly_api_key).then((function(e){return e.json()})).then((function(n){console.log("%c%s","color: #ea01ff","Airly",n),current_air_quality=n.current.indexes[0].level,console.log("Current air quality is",current_air_quality,"with value of: "+n.current.indexes[0].value+". Medium starts at 50, bad starts at 75. Death starts at 100."),air_quality_index=n.current.indexes[0].value,null==air_quality_index?document.getElementById("air_quality").innerHTML="Sprawdzam...":air_quality_index>=0&air_quality_index<30?document.getElementById("air_quality").innerHTML="Powietrze: 🤓":air_quality_index>=30&air_quality_index<50?document.getElementById("air_quality").innerHTML="Powietrze: 🤢":air_quality_index>=50&air_quality_index<75?document.getElementById("air_quality").innerHTML="Powietrze: 🤬":air_quality_index>=75&air_quality_index<100?document.getElementById("air_quality").innerHTML="Powietrze: ⚰️":air_quality_index>=100&air_quality_index<125?document.getElementById("air_quality").innerHTML="Powietrze: ⚰️⚰️":air_quality_index>=125&&(document.getElementById("air_quality").innerHTML="Powietrze: ⚰️⚰️⚰️");try{console.log("PM2.5:",n.current.values[1].value+"/25 μg"),console.log("PM10:",n.current.values[2].value+"/50 μg"),pm25=n.current.values[1].value,document.getElementById("pm25").innerHTML="PM2.5: "+pm25+"/25 μg",pm10=n.current.values[2].value,document.getElementById("pm10").innerHTML="PM10: "+pm10+"/50 μg"}catch(e){console.log("Can't take PM2.5 & PM10 data from Airly API. Will re-try with AQICN.")}null==air_quality_index&&(console.log("There is something wrong and I can't download air quality data from Airly. Probably I couldn't find any stations in 3 km radius or I can't send any more requests. Let's pull data from China instead 🤓"),fetch("https://api.waqi.info/feed/geo:"+e+";"+i+"/?token="+aqicn_api_key).then((function(e){return e.json()})).then((function(e){console.log("%c%s","color: #ea01ff","AQICN",e),console.log("AQICN:",e.data.aqi),air_quality_index=e.data.aqi,air_quality_index>=0&air_quality_index<50?document.getElementById("air_quality").innerHTML="Powietrze: 🤓":air_quality_index>=50&air_quality_index<100?document.getElementById("air_quality").innerHTML="Powietrze: 🤢":air_quality_index>=100&air_quality_index<150?document.getElementById("air_quality").innerHTML="Powietrze: 🤬":air_quality_index>=150&air_quality_index<200?document.getElementById("air_quality").innerHTML="Powietrze: ⚰️":air_quality_index>=200&air_quality_index<300?document.getElementById("air_quality").innerHTML="Powietrze: ⚰️⚰️":air_quality_index>=300&&(document.getElementById("air_quality").innerHTML="Powietrze: ⚰️⚰️⚰️"),"0"==n.current.standards.length?null==e.data.iaqi.pm25||null==e.data.iaqi.pm25?console.log("PM2.5 is not available in this location. Not able to show its value."):(pm25=e.data.iaqi.pm25.v,pm25=ConcPM25(pm25),console.log("PM2.5:",pm25+"/25 μg"),document.getElementById("pm25").innerHTML="PM2.5: "+pm25+"/25 μg"):(pm25=n.current.values[1].value,console.log("PM2.5:",pm25+"/25 μg")),"0"==n.current.standards.length?null==e.data.iaqi.pm10||null==e.data.iaqi.pm10?console.log("PM10 is not available in this location. Not able to show its value."):(pm10=e.data.iaqi.pm10.v,pm10=ConcPM10(pm10),console.log("PM10:",pm10+"/50 μg"),document.getElementById("pm10").innerHTML="PM10: "+pm10+"/50 μg"):(pm25=n.current.values[2].value,console.log("PM10:",pm10+"/50 μg"))})))})).catch((function(){}))}),500)}function smogAlert(){setTimeout((function(){var e=document.getElementById("air_quality").textContent;if("Powietrze: ⚰️"==e||"Powietrze: ⚰️⚰️"==e||"Powietrze: ⚰️⚰️⚰️"==e)if("Notification"in window)if("granted"===Notification.permission)new Notification("Smog zabija ☠️",{icon:"./images/umbrella-icon_blue-circle.png",body:"Lepiej nie wychodź z budynku i nie otwieraj okien!",requireInteraction:!0});else"denied"==Notification.permission?alert("Lepiej nie wychodź z budynku i nie otwieraj okien! Smog zabija ☠️"):"denied"!==Notification.permission&&(alert("Dostęp do powiadomień będzie użyty wyłącznie żeby wyświetlić informacje związane z zagrożeniami pogodowymi."),Notification.requestPermission().then((function(e){if("granted"===e)new Notification("Smog zabija ☠️",{icon:"./images/umbrella-icon_blue-circle.png",body:"Lepiej nie wychodź z budynku i nie otwieraj okien!",requireInteraction:!0})})));else console.error("This browser does not support desktop notifications."),alert("Lepiej nie wychodź z budynku i nie otwieraj okien! Smog zabija ☠️");else console.log("No alert/notification, air is not so bad. Current: > "+e+" <")}),5e3)}smogAlert();